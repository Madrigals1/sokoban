package res.constants;

import javafx.application.Platform;
import res.scenar.LevelCreate;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class Values {
    public static String levelsPath;
    public static int sceneWidth = 600;
    public static int sceneHeight = 600;
    public static int tileWidth = 0;
    public static int tileHeight = 0;
    public static String title = "Sokoban";

    public static final List<int[][]> levels = new ArrayList<>();

    public static boolean arrowEnabled = false;
    public static boolean levelLoaded = false;
    public static int[][][] levelsInitial = new int[][][]{
            { // level 1
                    {1,1,1,1,1,1,1,1,1,1},
                    {1,1,1,2,2,2,1,1,1,1},
                    {1,1,1,2,3,2,1,1,1,1},
                    {1,1,1,2,0,2,2,2,2,1},
                    {1,2,2,2,4,5,4,3,2,1},
                    {1,2,3,0,4,0,2,2,2,1},
                    {1,2,2,2,2,4,2,1,1,1},
                    {1,1,1,1,2,3,2,1,1,1},
                    {1,1,1,1,2,2,2,1,1,1},
                    {1,1,1,1,1,1,1,1,1,1}
            },{ // level 2
                    {2,2,2,2,2,1,1,1,1,1},
                    {2,0,0,5,2,1,1,1,1,1},
                    {2,0,4,4,2,1,2,2,2,1},
                    {2,0,4,0,2,1,2,3,2,1},
                    {2,2,2,0,2,2,2,3,2,1},
                    {1,2,2,0,0,0,0,3,2,1},
                    {1,2,0,0,0,2,0,0,2,1},
                    {1,2,0,0,0,2,2,2,2,1},
                    {1,2,2,2,2,2,1,1,1,1},
                    {1,1,1,1,1,1,1,1,1,1}
            },{ // level 3
                    {1,1,1,1,1,1,1,1,1,1},
                    {1,1,1,2,2,2,2,1,1,1},
                    {1,1,2,2,0,0,2,1,1,1},
                    {1,1,2,0,5,4,2,1,1,1},
                    {1,1,2,2,4,0,2,2,1,1},
                    {1,1,2,2,0,4,0,2,1,1},
                    {1,1,2,3,4,0,0,2,1,1},
                    {1,1,2,3,3,6,3,2,1,1},
                    {1,1,2,2,2,2,2,2,1,1},
                    {1,1,1,1,1,1,1,1,1,1}
            },{ // level 4
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,2,2,2,2,1,1,1,1,},
                    {1,1,2,5,0,2,2,2,1,1,},
                    {1,1,2,0,4,0,0,2,1,1,},
                    {1,2,2,2,0,2,0,2,2,1,},
                    {1,2,3,2,0,2,0,0,2,1,},
                    {1,2,3,4,0,0,2,0,2,1,},
                    {1,2,3,0,0,0,4,0,2,1,},
                    {1,2,2,2,2,2,2,2,2,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 5
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,2,2,2,2,2,2,1,},
                    {1,1,1,2,0,0,0,0,2,1,},
                    {1,2,2,2,4,4,4,0,2,1,},
                    {1,2,5,0,4,3,3,0,2,1,},
                    {1,2,0,4,3,3,3,2,2,1,},
                    {1,2,2,2,2,0,0,2,1,1,},
                    {1,1,1,1,2,2,2,2,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 6
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,2,2,2,2,2,1,1,},
                    {1,2,2,2,0,0,5,2,1,1,},
                    {1,2,0,0,4,3,0,2,2,1,},
                    {1,2,0,0,3,4,3,0,2,1,},
                    {1,2,2,2,0,6,4,0,2,1,},
                    {1,1,1,2,0,0,0,2,2,1,},
                    {1,1,1,2,2,2,2,2,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 7
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,2,2,2,2,1,1,1,},
                    {1,1,1,2,3,3,2,1,1,1,},
                    {1,1,2,2,0,3,2,2,1,1,},
                    {1,1,2,0,0,4,3,2,1,1,},
                    {1,2,2,0,4,0,0,2,2,1,},
                    {1,2,0,0,2,4,4,0,2,1,},
                    {1,2,0,0,5,0,0,0,2,1,},
                    {1,2,2,2,2,2,2,2,2,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 8
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,2,2,2,2,2,2,2,2,1,},
                    {1,2,0,0,2,0,0,0,2,1,},
                    {1,2,0,4,3,3,4,0,2,1,},
                    {1,2,5,4,3,6,0,2,2,1,},
                    {1,2,0,4,3,3,4,0,2,1,},
                    {1,2,0,0,2,0,0,0,2,1,},
                    {1,2,2,2,2,2,2,2,2,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 9
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,2,2,2,2,2,2,1,1,1,},
                    {1,2,0,0,0,0,2,1,1,1,},
                    {1,2,0,4,4,4,2,2,1,1,},
                    {1,2,0,0,2,3,3,2,2,2,},
                    {1,2,2,0,0,3,3,4,0,2,},
                    {1,1,2,0,5,0,0,0,0,2,},
                    {1,1,2,2,2,2,2,2,2,2,},
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 10
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,2,2,2,2,2,2,2,1,1,},
                    {1,2,3,3,4,3,3,2,1,1,},
                    {1,2,3,3,2,3,3,2,1,1,},
                    {1,2,0,4,4,4,0,2,1,1,},
                    {1,2,0,0,4,0,0,2,1,1,},
                    {1,2,0,4,4,4,0,2,1,1,},
                    {1,2,0,0,2,5,0,2,1,1,},
                    {1,2,2,2,2,2,2,2,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 11
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,2,2,2,2,2,1,1,1,},
                    {1,1,2,0,5,0,2,2,2,1,},
                    {1,2,2,0,2,4,0,0,2,1,},
                    {1,2,0,6,3,0,3,0,2,1,},
                    {1,2,0,0,4,4,0,2,2,1,},
                    {1,2,2,2,0,2,3,2,1,1,},
                    {1,1,1,2,0,0,0,2,1,1,},
                    {1,1,1,2,2,2,2,2,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 12
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,2,2,2,2,2,2,1,1,},
                    {1,1,2,0,0,0,0,2,1,1,},
                    {1,1,2,0,4,0,5,2,1,1,},
                    {1,1,2,2,6,0,0,2,1,1,},
                    {1,1,2,0,6,0,2,2,1,1,},
                    {1,1,2,0,6,0,2,1,1,1,},
                    {1,1,2,0,6,0,2,1,1,1,},
                    {1,1,2,0,3,0,2,1,1,1,},
                    {1,1,2,2,2,2,2,1,1,1,},
            },{ // level 13
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,2,2,2,2,1,1,1,},
                    {1,1,1,2,0,0,2,1,1,1,},
                    {1,2,2,2,4,0,2,2,1,1,},
                    {1,2,0,0,6,0,5,2,1,1,},
                    {1,2,0,0,6,0,0,2,1,1,},
                    {1,2,0,0,6,0,2,2,1,1,},
                    {1,2,2,2,6,0,2,1,1,1,},
                    {1,1,1,2,3,2,2,1,1,1,},
                    {1,1,1,2,2,2,1,1,1,1,},
            },{ // level 14
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,2,2,2,2,2,1,1,1,1,},
                    {1,2,0,0,0,2,2,2,2,2,},
                    {1,2,0,2,0,2,0,0,0,2,},
                    {1,2,0,4,0,0,0,4,0,2,},
                    {1,2,3,3,2,4,2,4,2,2,},
                    {1,2,3,5,4,0,0,0,2,1,},
                    {1,2,3,3,0,0,2,2,2,1,},
                    {1,2,2,2,2,2,2,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            },{ // level 15
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,2,2,2,2,2,2,1,1,},
                    {1,1,2,0,0,0,0,2,2,1,},
                    {1,2,2,3,2,2,4,0,2,1,},
                    {1,2,0,3,3,4,0,0,2,1,},
                    {1,2,0,0,2,4,0,0,2,1,},
                    {1,2,0,0,5,0,2,2,2,1,},
                    {1,2,2,2,2,2,2,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
                    {1,1,1,1,1,1,1,1,1,1,},
            }
    }; // Levels initial

    public static void addLevel(int[][] level){
        levels.add(level);
    }

    public static void getTileSize(){
        tileWidth = sceneWidth / 10;
        tileHeight = sceneHeight / 10;
    }

    public static void loadAllLevels(){
        levelsPath = System.getProperty("user.home") + "\\AppData\\Roaming\\Sokoban\\Levels.txt";
        String path = levelsPath;
        File file = new File(path);
        FileInputStream fis = null;

        //int[][] tiles = new int[10][10];
        String sLevel = "";

        if (!file.exists()) {
            // System.out.println(path + " does not exist.");
            try {
                file.getParentFile().mkdirs();
                file.createNewFile();
            }
            catch (IOException e){
                e.printStackTrace();
                Platform.exit();
            }
        }
        if (!(file.isFile() && file.canRead())) {
            // System.out.println(file.getName() + " cannot be read from.");
            return;
        }

        List <String> levelList = new ArrayList<>();

        try {
            fis = new FileInputStream(file);

            if(fis.available() == 0){
                getAllLevels();
            }

            while(fis.available() > 0){

                char current = (char) fis.read();

                if(current == '#'){
                    fis.read();
                    sLevel = sLevel.replace("\n", "");
                    levelList.add(sLevel);
                    sLevel = "";
                } else {
                    sLevel += current;
                }
            }
        } catch (IOException e){
            e.printStackTrace();
            //Platform.exit();
        }

        for(int i = 0; i < levelList.size(); i++){
            int[][] tiles = new int[10][10];

            String[] items = levelList.get(i).split(",");
            for(int j = 0; j < items.length; j++){
                int k = j / 10;
                int l = j % 10;
                tiles[k][l] = Integer.parseInt(items[j]);
            }

            Values.addLevel(tiles);
        }
    }

    public static void getAllLevels(){
        for(int i = 0; i < 15; i++){
            LevelCreate.tiles = Values.levelsInitial[i];
            LevelCreate.saveLevel();
        }
    }
}
